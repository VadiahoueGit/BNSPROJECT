<div class="card">
  <p-table
    [styleClass]="'p-datatable-sm'"
    #dt2
    [value]="dataList"
    dataKey="id"
    [rows]="8"
    [totalRecords]="totalPages" [lazy]="true"
    [rowsPerPageOptions]="[10, 25, 50]"
    [paginator]="true"
    (onPage)="onPage($event)"
  >
    <ng-template pTemplate="header">
      <tr>
        <th style="color: var(--secondary-color)"></th>
        <th style="color: var(--secondary-color)">Commandes</th>
        <th style="color: var(--secondary-color)">Motif</th>
        <th style="color: var(--secondary-color)">Agent</th>
        <th style="color: var(--secondary-color)">Numéro SAP</th>
        <th style="color: var(--secondary-color)">Client</th>
        <th style="color: var(--secondary-color)">Montant à verser</th>
        <th style="color: var(--secondary-color)">Montant versé</th>
        <th style="color: var(--secondary-color)">Date création</th>
        <th style="color: var(--secondary-color)">Statut</th>
        <th style="color: var(--secondary-color)">Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-dataList>
      <tr>
        <td>
          <img *ngIf="dataList.hasStatutEnAttente" src="assets/icon/partial.png" style="width: 20px; height : 20px;"
               alt="">
        </td>
        <td>
          <span class="ml-1 vertical-align-middle" style="font-size: 11px">
            {{
              dataList?.paiementsCommandeClient?.length
                ? dataList.paiementsCommandeClient[0]?.NumCommande
                : dataList?.paiementsCommandeGratuit?.length
                  ? dataList.paiementsCommandeGratuit[0]?.NumCommande
                  : dataList?.paiementsVente?.length
                    ? dataList.paiementsVente[0]?.venteChine.numVenteChine
                    : dataList?.returnStock?.venteChine
                      ? dataList?.returnStock?.venteChine?.numVenteChine
                      : dataList?.returnStock?.commandeClient
                        ? dataList?.returnStock?.commandeClient?.NumCommande
                        : dataList?.returnStock?.commandeGratuite
                          ? dataList?.returnStock?.commandeGratuite?.NumCommande
                          : dataList?.paiementsCommandeFournisseur?.length
                            ? dataList.paiementsCommandeFournisseur[0]?.NumCommande
                            : "NA"
            }}
          </span>
        </td>
        <td>
          <span class="ml-1 vertical-align-middle">
            {{ dataList?.motif }}
          </span>
        </td>
        <td>
          {{
            dataList?.paiementsCommandeClient?.length
              ? (dataList?.transporteur?.nom || "N/A") +
              " " +
              (dataList?.transporteur?.prenoms || "N/A")
              : dataList?.paiementsCommandeGratuit?.length
                ? (dataList?.transporteur?.nom || "N/A") +
                " " +
                (dataList?.transporteur?.prenoms || "N/A")
                : dataList?.paiementsVente?.length
                  ? (dataList?.paiementsVente[0]?.commercial?.nom) + ' ' +
                  (dataList?.paiementsVente[0]?.commercial?.prenoms)
                  : dataList?.returnStock?.venteChine
                    ? dataList?.returnStock?.venteChine?.commercial?.nom + ' ' +
                    dataList?.returnStock?.venteChine?.commercial?.prenoms : ""
          }}
        </td>
        <td>
          {{
            dataList?.client ? dataList?.client.numeroSAP?.numeroSAP : 'N/A'
          }}
        </td>
        <td>
          {{
            dataList?.client?.raisonSocial || dataList?.client?.nomEtablissement ||
            dataList?.paiementsVente[0]?.pointdevente.nomEtablissement || "N/A"
          }}
        </td>
        <td>
          <span class="ml-1 vertical-align-middle">
            {{ dataList?.montantAPercevoir | number }}
          </span>
        </td>
        <td>
          {{ dataList?.montantPercu | number }}
        </td>

        <td>
          <span class="ml-1 vertical-align-middle">
            {{ dataList?.createdAt | date : "dd/MM/yyyy" }}
          </span>
        </td>
        <td>
          <span class="ml-1 vertical-align-middle">
            {{ dataList?.statut }}
          </span>
        </td>
        <td>
      <tr class="d-flex justify-content-center gap-3">
        <td>
          <i
            (click)="OnEdit(dataList)"
            style="cursor: pointer"
            class="fas fa-eye text-secondary"
          ></i>
        </td>
        <!-- <td><i (click)="OnDelete(dataList.id)" style="cursor: pointer;"
                    class="fas fa-trash-alt text-danger"></i></td> -->
      </tr>
      </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="5">Aucun élément trouvé.</td>
      </tr>
    </ng-template>
  </p-table>
</div>
